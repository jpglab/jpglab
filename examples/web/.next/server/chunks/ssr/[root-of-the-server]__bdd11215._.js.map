{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/kevinschaich/repositories/jpglab/fuse/examples/web/app/page.tsx"],"sourcesContent":["'use client'\n\nimport { Camera, listCameras, CameraDescriptor } from '../../../dist/web'\nimport { useEffect, useState } from \"react\";\n\nexport default function Home() {\n  const [cameras, setCameras] = useState<CameraDescriptor[]>([])\n  const [error, setError] = useState<string>('')\n  const [connected, setConnected] = useState(false)\n\n  // Check for already paired devices\n  const checkCameras = async () => {\n    try {\n      const cams = await listCameras()\n      console.log('Found cameras:', cams)\n      setCameras(cams)\n    } catch (err) {\n      console.error('Error listing cameras:', err)\n      setError(err?.toString() || 'Failed to list cameras')\n    }\n  }\n\n  useEffect(() => {\n    checkCameras()\n  }, [])\n\n  // Request permission for a new USB device\n  const requestCameraPermission = async () => {\n    try {\n      // For WebUSB, we need to request device access with user interaction\n      // This requires the WebUSBDeviceFinder to have a requestDevice method\n      if (!navigator.usb) {\n        setError('WebUSB is not supported in this browser')\n        return\n      }\n\n      // Request device with PTP class filter (class 6)\n      const device = await navigator.usb.requestDevice({ \n        filters: [\n          { classCode: 6 }, // PTP/MTP devices\n        ]\n      })\n      \n      console.log('Device granted:', device)\n      \n      // After permission granted, refresh the camera list\n      await checkCameras()\n    } catch (err: any) {\n      if (err.name === 'NotFoundError') {\n        setError('No camera selected')\n      } else {\n        console.error('Error requesting device:', err)\n        setError(err?.toString() || 'Failed to request device')\n      }\n    }\n  }\n\n  // Connect to a camera\n  const connectCamera = async () => {\n    try {\n      const camera = new Camera()\n      await camera.connect()\n      setConnected(true)\n      console.log('Connected to camera!')\n    } catch (err) {\n      console.error('Error connecting:', err)\n      setError(err?.toString() || 'Failed to connect')\n    }\n  }\n\n  return (\n    <div className=\"font-sans grid grid-rows-[auto_1fr_auto] items-center justify-items-center min-h-screen p-8 gap-8\">\n      <div className=\"text-center\">\n        <h1 className=\"text-2xl font-bold mb-4\">WebUSB Camera Control</h1>\n        \n        {/* Show WebUSB support status */}\n        <div className=\"mb-4\">\n          WebUSB Support: {navigator.usb ? '✅ Available' : '❌ Not Available'}\n        </div>\n\n        {/* Permission request button */}\n        <button \n          onClick={requestCameraPermission}\n          className=\"bg-blue-500 text-white px-4 py-2 rounded mr-2 hover:bg-blue-600\"\n        >\n          Request Camera Access\n        </button>\n\n        {/* Refresh button */}\n        <button \n          onClick={checkCameras}\n          className=\"bg-gray-500 text-white px-4 py-2 rounded mr-2 hover:bg-gray-600\"\n        >\n          Refresh Camera List\n        </button>\n\n        {/* Connect button */}\n        {cameras.length > 0 && !connected && (\n          <button \n            onClick={connectCamera}\n            className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\"\n          >\n            Connect to First Camera\n          </button>\n        )}\n      </div>\n\n      {/* Camera list */}\n      <div className=\"text-center\">\n        <h2 className=\"text-xl mb-2\">Available Cameras: {cameras.length}</h2>\n        {cameras.length === 0 ? (\n          <p className=\"text-gray-500\">\n            No cameras found. Click \"Request Camera Access\" to grant permission.\n          </p>\n        ) : (\n          <div className=\"space-y-2\">\n            {cameras.map((camera, idx) => (\n              <div key={camera.serialNumber || idx} className=\"border p-2 rounded\">\n                <div>Vendor: {camera.vendor}</div>\n                <div>Model: {camera.model}</div>\n                <div>Serial: {camera.serialNumber || 'N/A'}</div>\n                {camera.usb && (\n                  <div className=\"text-sm text-gray-600\">\n                    USB: {camera.usb.vendorId.toString(16)}:{camera.usb.productId.toString(16)}\n                  </div>\n                )}\n              </div>\n            ))}\n          </div>\n        )}\n\n        {connected && (\n          <div className=\"mt-4 text-green-600 font-bold\">\n            ✅ Camera Connected!\n          </div>\n        )}\n      </div>\n\n      {/* Error display */}\n      {error && (\n        <div className=\"text-red-500 text-center\">\n          Error: {error}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;;;;;;AAGA;AAHA;;;;AAKe,SAAS;IACtB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,oOAAQ,EAAqB,EAAE;IAC7D,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,oOAAQ,EAAS;IAC3C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,oOAAQ,EAAC;IAE3C,mCAAmC;IACnC,MAAM,eAAe;QACnB,IAAI;YACF,MAAM,OAAO,MAAM;YACnB,QAAQ,GAAG,CAAC,kBAAkB;YAC9B,WAAW;QACb,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,0BAA0B;YACxC,SAAS,KAAK,cAAc;QAC9B;IACF;IAEA,IAAA,qOAAS,EAAC;QACR;IACF,GAAG,EAAE;IAEL,0CAA0C;IAC1C,MAAM,0BAA0B;QAC9B,IAAI;YACF,qEAAqE;YACrE,sEAAsE;YACtE,IAAI,CAAC,UAAU,GAAG,EAAE;gBAClB,SAAS;gBACT;YACF;YAEA,iDAAiD;YACjD,MAAM,SAAS,MAAM,UAAU,GAAG,CAAC,aAAa,CAAC;gBAC/C,SAAS;oBACP;wBAAE,WAAW;oBAAE;iBAChB;YACH;YAEA,QAAQ,GAAG,CAAC,mBAAmB;YAE/B,oDAAoD;YACpD,MAAM;QACR,EAAE,OAAO,KAAU;YACjB,IAAI,IAAI,IAAI,KAAK,iBAAiB;gBAChC,SAAS;YACX,OAAO;gBACL,QAAQ,KAAK,CAAC,4BAA4B;gBAC1C,SAAS,KAAK,cAAc;YAC9B;QACF;IACF;IAEA,sBAAsB;IACtB,MAAM,gBAAgB;QACpB,IAAI;YACF,MAAM,SAAS,IAAI;YACnB,MAAM,OAAO,OAAO;YACpB,aAAa;YACb,QAAQ,GAAG,CAAC;QACd,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,qBAAqB;YACnC,SAAS,KAAK,cAAc;QAC9B;IACF;IAEA,qBACE,iQAAC;QAAI,WAAU;;0BACb,iQAAC;gBAAI,WAAU;;kCACb,iQAAC;wBAAG,WAAU;kCAA0B;;;;;;kCAGxC,iQAAC;wBAAI,WAAU;;4BAAO;4BACH,UAAU,GAAG,GAAG,gBAAgB;;;;;;;kCAInD,iQAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;kCAKD,iQAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;oBAKA,QAAQ,MAAM,GAAG,KAAK,CAAC,2BACtB,iQAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;;;;;;;0BAOL,iQAAC;gBAAI,WAAU;;kCACb,iQAAC;wBAAG,WAAU;;4BAAe;4BAAoB,QAAQ,MAAM;;;;;;;oBAC9D,QAAQ,MAAM,KAAK,kBAClB,iQAAC;wBAAE,WAAU;kCAAgB;;;;;6CAI7B,iQAAC;wBAAI,WAAU;kCACZ,QAAQ,GAAG,CAAC,CAAC,QAAQ,oBACpB,iQAAC;gCAAqC,WAAU;;kDAC9C,iQAAC;;4CAAI;4CAAS,OAAO,MAAM;;;;;;;kDAC3B,iQAAC;;4CAAI;4CAAQ,OAAO,KAAK;;;;;;;kDACzB,iQAAC;;4CAAI;4CAAS,OAAO,YAAY,IAAI;;;;;;;oCACpC,OAAO,GAAG,kBACT,iQAAC;wCAAI,WAAU;;4CAAwB;4CAC/B,OAAO,GAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC;4CAAI;4CAAE,OAAO,GAAG,CAAC,SAAS,CAAC,QAAQ,CAAC;;;;;;;;+BANnE,OAAO,YAAY,IAAI;;;;;;;;;;oBActC,2BACC,iQAAC;wBAAI,WAAU;kCAAgC;;;;;;;;;;;;YAOlD,uBACC,iQAAC;gBAAI,WAAU;;oBAA2B;oBAChC;;;;;;;;;;;;;AAKlB","debugId":null}},
    {"offset": {"line": 258, "column": 0}, "map": {"version":3,"sources":["file:///Users/kevinschaich/repositories/jpglab/fuse/examples/web/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 277, "column": 0}, "map": {"version":3,"sources":["file:///Users/kevinschaich/repositories/jpglab/fuse/examples/web/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,yIACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 282, "column": 0}, "map": {"version":3,"sources":["file:///Users/kevinschaich/repositories/jpglab/fuse/examples/web/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,yIACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0],"debugId":null}}]
}